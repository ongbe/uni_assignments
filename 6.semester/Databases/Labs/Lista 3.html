<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script type="text/javascript">(function(){(function(){function e(a){this.t={};this.tick=function(a,c,b){this.t[a]=[void 0!=b?b:(new Date).getTime(),c];if(void 0==b)try{window.console.timeStamp("CSI/"+a)}catch(h){}};this.tick("start",null,a)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var f=0<d?new e(d):new e;window.jstiming={Timer:e,load:f};if(a){var c=a.navigationStart;0<c&&d>=c&&(window.jstiming.srt=d-c)}if(a){var b=window.jstiming.load;0<c&&d>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",
d),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(this);
</script><script type="text/javascript">var KX_timer = new window.jstiming.Timer(); KX_timer.name = 'published';</script><title>Lista 3 - SQL (2017) - pytania i rozwiązania</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon6.ico"><style type="text/css">
      body {
        font-family: arial, sans, sans-serif;
        margin: 0;
      }

      iframe {
        border: 0;
        frameborder: 0;
        height: 100%;
        width: 100%;
      }

      #header, #footer {
        background: #f0f0f0;
        padding: 10px 10px;
      }

      #header {
        border-bottom: 1px #ccc solid;
      }

      #footer {
        border-top: 1px #ccc solid;
        border-bottom: 1px #ccc solid;
        font-size: 13;
      }

      #contents {
        margin: 6px;
      }

      .dash {
        padding: 0 6px;
      }
    </style></head><body><div id="header">Lista 3 - SQL (2017) - pytania i rozwiązania</div><div id="contents"><style type="text/css">.lst-kix_geg53g1748e-0>li{counter-increment:lst-ctn-kix_geg53g1748e-0}ol.lst-kix_geg53g1748e-8{list-style-type:none}ol.lst-kix_geg53g1748e-8.start{counter-reset:lst-ctn-kix_geg53g1748e-8 0}ol.lst-kix_gwu02booh45b-2{list-style-type:none}.lst-kix_bmiamcwxh7zg-4>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-4}ol.lst-kix_gwu02booh45b-1{list-style-type:none}ol.lst-kix_gwu02booh45b-0{list-style-type:none}ol.lst-kix_gwu02booh45b-6{list-style-type:none}ol.lst-kix_gwu02booh45b-5{list-style-type:none}ol.lst-kix_gwu02booh45b-4{list-style-type:none}ol.lst-kix_gwu02booh45b-3{list-style-type:none}ol.lst-kix_gwu02booh45b-8{list-style-type:none}ol.lst-kix_odev1333usqs-0.start{counter-reset:lst-ctn-kix_odev1333usqs-0 0}ol.lst-kix_gwu02booh45b-7{list-style-type:none}.lst-kix_odev1333usqs-8>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-8,lower-roman) ". "}ol.lst-kix_geg53g1748e-5{list-style-type:none}.lst-kix_pc83f1nrnctg-5>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-5}ol.lst-kix_geg53g1748e-4{list-style-type:none}ol.lst-kix_geg53g1748e-7{list-style-type:none}ol.lst-kix_geg53g1748e-6{list-style-type:none}ol.lst-kix_geg53g1748e-1{list-style-type:none}ol.lst-kix_geg53g1748e-0{list-style-type:none}ol.lst-kix_geg53g1748e-3{list-style-type:none}ol.lst-kix_geg53g1748e-2{list-style-type:none}.lst-kix_bmiamcwxh7zg-6>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-6}.lst-kix_geg53g1748e-0>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-0,decimal) ". "}ol.lst-kix_bmiamcwxh7zg-8{list-style-type:none}ol.lst-kix_bmiamcwxh7zg-7{list-style-type:none}ol.lst-kix_bmiamcwxh7zg-6{list-style-type:none}.lst-kix_geg53g1748e-2>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-2,lower-roman) ". "}ol.lst-kix_bmiamcwxh7zg-5{list-style-type:none}ol.lst-kix_bmiamcwxh7zg-4{list-style-type:none}.lst-kix_geg53g1748e-1>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-1,lower-latin) ". "}ol.lst-kix_bmiamcwxh7zg-3{list-style-type:none}ol.lst-kix_bmiamcwxh7zg-2{list-style-type:none}ol.lst-kix_e19x04ky1hgp-7.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-7 0}ol.lst-kix_bmiamcwxh7zg-0{list-style-type:none}.lst-kix_geg53g1748e-7>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-7,lower-latin) ". "}ol.lst-kix_geg53g1748e-3.start{counter-reset:lst-ctn-kix_geg53g1748e-3 0}.lst-kix_geg53g1748e-6>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-6,decimal) ". "}.lst-kix_geg53g1748e-8>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-8,lower-roman) ". "}ol.lst-kix_pc83f1nrnctg-2.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-2 0}.lst-kix_gwu02booh45b-3>li{counter-increment:lst-ctn-kix_gwu02booh45b-3}.lst-kix_geg53g1748e-3>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-3,decimal) ". "}ol.lst-kix_gwu02booh45b-8.start{counter-reset:lst-ctn-kix_gwu02booh45b-8 0}.lst-kix_geg53g1748e-4>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-4,lower-latin) ". "}.lst-kix_geg53g1748e-5>li:before{content:"" counter(lst-ctn-kix_geg53g1748e-5,lower-roman) ". "}ol.lst-kix_pc83f1nrnctg-0{list-style-type:none}ol.lst-kix_pc83f1nrnctg-1{list-style-type:none}.lst-kix_gwu02booh45b-8>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-8,lower-roman) ". "}ol.lst-kix_pc83f1nrnctg-2{list-style-type:none}ol.lst-kix_pc83f1nrnctg-3{list-style-type:none}.lst-kix_gwu02booh45b-7>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-7,lower-latin) ". "}ol.lst-kix_pc83f1nrnctg-4{list-style-type:none}ol.lst-kix_pc83f1nrnctg-5{list-style-type:none}ol.lst-kix_pc83f1nrnctg-6{list-style-type:none}ol.lst-kix_pc83f1nrnctg-7{list-style-type:none}ol.lst-kix_pc83f1nrnctg-8{list-style-type:none}.lst-kix_gwu02booh45b-4>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-4,lower-latin) ". "}.lst-kix_bmiamcwxh7zg-2>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-2}.lst-kix_gwu02booh45b-5>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-5,lower-roman) ". "}.lst-kix_gwu02booh45b-6>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-6,decimal) ". "}.lst-kix_odev1333usqs-6>li{counter-increment:lst-ctn-kix_odev1333usqs-6}ol.lst-kix_e19x04ky1hgp-1.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-1 0}ol.lst-kix_geg53g1748e-2.start{counter-reset:lst-ctn-kix_geg53g1748e-2 0}.lst-kix_bmiamcwxh7zg-8>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-8}.lst-kix_gwu02booh45b-5>li{counter-increment:lst-ctn-kix_gwu02booh45b-5}ol.lst-kix_geg53g1748e-7.start{counter-reset:lst-ctn-kix_geg53g1748e-7 0}.lst-kix_geg53g1748e-2>li{counter-increment:lst-ctn-kix_geg53g1748e-2}.lst-kix_pc83f1nrnctg-7>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-7}.lst-kix_gwu02booh45b-0>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-0,decimal) ". "}.lst-kix_e19x04ky1hgp-8>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-8}.lst-kix_gwu02booh45b-1>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-1,lower-latin) ". "}ol.lst-kix_e19x04ky1hgp-2.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-2 0}ol.lst-kix_e19x04ky1hgp-8.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-8 0}.lst-kix_gwu02booh45b-3>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-3,decimal) ". "}.lst-kix_gwu02booh45b-2>li:before{content:"" counter(lst-ctn-kix_gwu02booh45b-2,lower-roman) ". "}ol.lst-kix_bmiamcwxh7zg-3.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-3 0}ol.lst-kix_gwu02booh45b-7.start{counter-reset:lst-ctn-kix_gwu02booh45b-7 0}ol.lst-kix_e19x04ky1hgp-6.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-6 0}ol.lst-kix_pc83f1nrnctg-0.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-0 0}.lst-kix_odev1333usqs-3>li{counter-increment:lst-ctn-kix_odev1333usqs-3}ol.lst-kix_pc83f1nrnctg-3.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-3 0}.lst-kix_e19x04ky1hgp-5>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-5,lower-roman) ". "}.lst-kix_e19x04ky1hgp-7>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-7,lower-latin) ". "}ol.lst-kix_e19x04ky1hgp-3.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-3 0}.lst-kix_e19x04ky1hgp-1>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-1}.lst-kix_e19x04ky1hgp-1>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-1,lower-latin) ". "}.lst-kix_geg53g1748e-4>li{counter-increment:lst-ctn-kix_geg53g1748e-4}.lst-kix_pc83f1nrnctg-0>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-0}.lst-kix_e19x04ky1hgp-3>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-3,decimal) ". "}ol.lst-kix_bmiamcwxh7zg-6.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-6 0}ol.lst-kix_odev1333usqs-1.start{counter-reset:lst-ctn-kix_odev1333usqs-1 0}.lst-kix_odev1333usqs-1>li{counter-increment:lst-ctn-kix_odev1333usqs-1}.lst-kix_e19x04ky1hgp-0>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-0}ol.lst-kix_e19x04ky1hgp-4.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-4 0}ol.lst-kix_bmiamcwxh7zg-5.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-5 0}.lst-kix_e19x04ky1hgp-6>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-6}.lst-kix_pc83f1nrnctg-5>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-5,lower-roman) ". "}.lst-kix_pc83f1nrnctg-7>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-7,lower-latin) ". "}.lst-kix_geg53g1748e-3>li{counter-increment:lst-ctn-kix_geg53g1748e-3}.lst-kix_gwu02booh45b-4>li{counter-increment:lst-ctn-kix_gwu02booh45b-4}.lst-kix_odev1333usqs-2>li{counter-increment:lst-ctn-kix_odev1333usqs-2}.lst-kix_odev1333usqs-8>li{counter-increment:lst-ctn-kix_odev1333usqs-8}.lst-kix_odev1333usqs-6>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-6,decimal) ". "}ol.lst-kix_pc83f1nrnctg-1.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-1 0}ol.lst-kix_bmiamcwxh7zg-4.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-4 0}.lst-kix_odev1333usqs-4>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-4,lower-latin) ". "}ol.lst-kix_geg53g1748e-4.start{counter-reset:lst-ctn-kix_geg53g1748e-4 0}.lst-kix_odev1333usqs-0>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-0,decimal) ". "}.lst-kix_odev1333usqs-2>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-2,lower-roman) ". "}ol.lst-kix_e19x04ky1hgp-5.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-5 0}ol.lst-kix_gwu02booh45b-0.start{counter-reset:lst-ctn-kix_gwu02booh45b-0 0}.lst-kix_gwu02booh45b-2>li{counter-increment:lst-ctn-kix_gwu02booh45b-2}.lst-kix_pc83f1nrnctg-6>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-6}.lst-kix_bmiamcwxh7zg-8>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-8,lower-roman) ". "}.lst-kix_bmiamcwxh7zg-7>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-7,lower-latin) ". "}ol.lst-kix_bmiamcwxh7zg-7.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-7 0}.lst-kix_bmiamcwxh7zg-5>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-5}ol.lst-kix_geg53g1748e-5.start{counter-reset:lst-ctn-kix_geg53g1748e-5 0}.lst-kix_pc83f1nrnctg-2>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-2,lower-roman) ". "}.lst-kix_pc83f1nrnctg-1>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-1,lower-latin) ". "}.lst-kix_pc83f1nrnctg-3>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-3,decimal) ". "}.lst-kix_pc83f1nrnctg-0>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-0,decimal) ". "}.lst-kix_pc83f1nrnctg-4>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-4,lower-latin) ". "}.lst-kix_e19x04ky1hgp-7>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-7}ol.lst-kix_geg53g1748e-0.start{counter-reset:lst-ctn-kix_geg53g1748e-0 0}ol.lst-kix_odev1333usqs-8.start{counter-reset:lst-ctn-kix_odev1333usqs-8 0}.lst-kix_gwu02booh45b-0>li{counter-increment:lst-ctn-kix_gwu02booh45b-0}.lst-kix_geg53g1748e-1>li{counter-increment:lst-ctn-kix_geg53g1748e-1}.lst-kix_bmiamcwxh7zg-3>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-3}ol.lst-kix_geg53g1748e-6.start{counter-reset:lst-ctn-kix_geg53g1748e-6 0}.lst-kix_odev1333usqs-7>li{counter-increment:lst-ctn-kix_odev1333usqs-7}ol.lst-kix_gwu02booh45b-5.start{counter-reset:lst-ctn-kix_gwu02booh45b-5 0}ol.lst-kix_bmiamcwxh7zg-8.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-8 0}ol.lst-kix_pc83f1nrnctg-5.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-5 0}.lst-kix_pc83f1nrnctg-4>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-4}ol.lst-kix_odev1333usqs-2.start{counter-reset:lst-ctn-kix_odev1333usqs-2 0}ol.lst-kix_bmiamcwxh7zg-2.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-2 0}ol.lst-kix_gwu02booh45b-6.start{counter-reset:lst-ctn-kix_gwu02booh45b-6 0}ol.lst-kix_pc83f1nrnctg-4.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-4 0}.lst-kix_bmiamcwxh7zg-1>li:before{content:"\0025cb  "}.lst-kix_bmiamcwxh7zg-0>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-0,decimal) ". "}.lst-kix_odev1333usqs-0>li{counter-increment:lst-ctn-kix_odev1333usqs-0}ol.lst-kix_odev1333usqs-3.start{counter-reset:lst-ctn-kix_odev1333usqs-3 0}.lst-kix_bmiamcwxh7zg-5>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-5,lower-roman) ". "}.lst-kix_e19x04ky1hgp-5>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-5}.lst-kix_bmiamcwxh7zg-4>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-4,lower-latin) ". "}.lst-kix_bmiamcwxh7zg-6>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-6,decimal) ". "}ul.lst-kix_bmiamcwxh7zg-1{list-style-type:none}.lst-kix_geg53g1748e-5>li{counter-increment:lst-ctn-kix_geg53g1748e-5}.lst-kix_bmiamcwxh7zg-2>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-2,lower-roman) ". "}.lst-kix_geg53g1748e-8>li{counter-increment:lst-ctn-kix_geg53g1748e-8}.lst-kix_bmiamcwxh7zg-3>li:before{content:"" counter(lst-ctn-kix_bmiamcwxh7zg-3,decimal) ". "}ol.lst-kix_geg53g1748e-1.start{counter-reset:lst-ctn-kix_geg53g1748e-1 0}.lst-kix_e19x04ky1hgp-2>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-2}.lst-kix_gwu02booh45b-8>li{counter-increment:lst-ctn-kix_gwu02booh45b-8}ol.lst-kix_e19x04ky1hgp-1{list-style-type:none}ol.lst-kix_e19x04ky1hgp-0{list-style-type:none}.lst-kix_geg53g1748e-6>li{counter-increment:lst-ctn-kix_geg53g1748e-6}ol.lst-kix_odev1333usqs-4.start{counter-reset:lst-ctn-kix_odev1333usqs-4 0}.lst-kix_e19x04ky1hgp-3>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-3}ol.lst-kix_e19x04ky1hgp-8{list-style-type:none}ol.lst-kix_e19x04ky1hgp-7{list-style-type:none}ol.lst-kix_e19x04ky1hgp-6{list-style-type:none}ol.lst-kix_e19x04ky1hgp-5{list-style-type:none}ol.lst-kix_e19x04ky1hgp-4{list-style-type:none}ol.lst-kix_e19x04ky1hgp-3{list-style-type:none}ol.lst-kix_e19x04ky1hgp-2{list-style-type:none}.lst-kix_pc83f1nrnctg-1>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-1}ol.lst-kix_bmiamcwxh7zg-0.start{counter-reset:lst-ctn-kix_bmiamcwxh7zg-0 0}ol.lst-kix_odev1333usqs-7.start{counter-reset:lst-ctn-kix_odev1333usqs-7 0}ol.lst-kix_gwu02booh45b-4.start{counter-reset:lst-ctn-kix_gwu02booh45b-4 0}.lst-kix_e19x04ky1hgp-6>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-6,decimal) ". "}ol.lst-kix_gwu02booh45b-1.start{counter-reset:lst-ctn-kix_gwu02booh45b-1 0}ol.lst-kix_pc83f1nrnctg-6.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-6 0}.lst-kix_e19x04ky1hgp-2>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-2,lower-roman) ". "}.lst-kix_e19x04ky1hgp-4>li{counter-increment:lst-ctn-kix_e19x04ky1hgp-4}.lst-kix_gwu02booh45b-6>li{counter-increment:lst-ctn-kix_gwu02booh45b-6}.lst-kix_e19x04ky1hgp-0>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-0,decimal) ". "}.lst-kix_e19x04ky1hgp-8>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-8,lower-roman) ". "}.lst-kix_geg53g1748e-7>li{counter-increment:lst-ctn-kix_geg53g1748e-7}ol.lst-kix_odev1333usqs-2{list-style-type:none}ol.lst-kix_odev1333usqs-1{list-style-type:none}ol.lst-kix_odev1333usqs-0{list-style-type:none}ol.lst-kix_odev1333usqs-6{list-style-type:none}ol.lst-kix_odev1333usqs-5{list-style-type:none}ol.lst-kix_odev1333usqs-4{list-style-type:none}ol.lst-kix_odev1333usqs-3{list-style-type:none}ol.lst-kix_e19x04ky1hgp-0.start{counter-reset:lst-ctn-kix_e19x04ky1hgp-0 0}ol.lst-kix_odev1333usqs-8{list-style-type:none}ol.lst-kix_odev1333usqs-7{list-style-type:none}.lst-kix_bmiamcwxh7zg-0>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-0}.lst-kix_pc83f1nrnctg-3>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-3}.lst-kix_e19x04ky1hgp-4>li:before{content:"" counter(lst-ctn-kix_e19x04ky1hgp-4,lower-latin) ". "}.lst-kix_odev1333usqs-4>li{counter-increment:lst-ctn-kix_odev1333usqs-4}.lst-kix_bmiamcwxh7zg-7>li{counter-increment:lst-ctn-kix_bmiamcwxh7zg-7}ol.lst-kix_gwu02booh45b-2.start{counter-reset:lst-ctn-kix_gwu02booh45b-2 0}ol.lst-kix_pc83f1nrnctg-8.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-8 0}.lst-kix_pc83f1nrnctg-8>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-8,lower-roman) ". "}ol.lst-kix_odev1333usqs-5.start{counter-reset:lst-ctn-kix_odev1333usqs-5 0}.lst-kix_pc83f1nrnctg-6>li:before{content:"" counter(lst-ctn-kix_pc83f1nrnctg-6,decimal) ". "}.lst-kix_pc83f1nrnctg-8>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-8}.lst-kix_odev1333usqs-5>li{counter-increment:lst-ctn-kix_odev1333usqs-5}.lst-kix_odev1333usqs-7>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-7,lower-latin) ". "}.lst-kix_pc83f1nrnctg-2>li{counter-increment:lst-ctn-kix_pc83f1nrnctg-2}.lst-kix_gwu02booh45b-1>li{counter-increment:lst-ctn-kix_gwu02booh45b-1}.lst-kix_odev1333usqs-3>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-3,decimal) ". "}.lst-kix_odev1333usqs-5>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-5,lower-roman) ". "}ol.lst-kix_odev1333usqs-6.start{counter-reset:lst-ctn-kix_odev1333usqs-6 0}.lst-kix_gwu02booh45b-7>li{counter-increment:lst-ctn-kix_gwu02booh45b-7}ol.lst-kix_gwu02booh45b-3.start{counter-reset:lst-ctn-kix_gwu02booh45b-3 0}.lst-kix_odev1333usqs-1>li:before{content:"" counter(lst-ctn-kix_odev1333usqs-1,lower-latin) ". "}ol.lst-kix_pc83f1nrnctg-7.start{counter-reset:lst-ctn-kix_pc83f1nrnctg-7 0}ol{margin:0;padding:0}table td,table th{padding:0}.c4{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#351c75;border-top-width:1pt;border-right-width:1pt;border-left-color:#351c75;vertical-align:top;border-right-color:#351c75;border-left-width:1pt;border-top-style:solid;background-color:#f3f3f3;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#351c75;border-bottom-style:solid}.c13{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c18{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c14{background-color:#ffffff;color:#0000ff;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Arial";font-style:normal}.c11{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c24{margin-left:72pt;padding-top:0pt;padding-left:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c3{color:#cc4125;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c22{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Trebuchet MS";font-style:normal}.c5{color:#000000;font-weight:700;text-decoration:underline;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c1{color:#351c75;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier New";font-style:normal}.c23{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c26{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:justify}.c28{padding-top:0pt;padding-bottom:0pt;line-height:1.1814544851129705;orphans:2;widows:2;text-align:center}.c21{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c32{padding-top:10pt;padding-bottom:0pt;line-height:1.15;page-break-after:avoid;text-align:left}.c7{margin-left:36pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c19{text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c34{text-decoration:none;vertical-align:baseline;font-size:11pt}.c8{font-family:"Courier New";color:#351c75;font-weight:700}.c10{font-family:"Courier New";color:#cc4125;font-weight:400}.c29{font-size:11pt;font-family:"Arial";font-weight:400}.c9{font-family:"Courier New";color:#cc4125;font-weight:700}.c30{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c31{font-size:8pt;color:#0000ff}.c33{color:#000000;font-family:"Arial"}.c20{color:inherit;text-decoration:inherit}.c12{padding:0;margin:0}.c27{font-style:italic}.c25{background-color:#ffffff}.c16{height:0pt}.c15{height:11pt}.c17{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:21pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:13pt;padding-bottom:10pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:10pt;color:#000000;font-size:16pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:10pt;color:#000000;font-weight:700;font-size:13pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:8pt;color:#666666;font-weight:700;font-size:12pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:8pt;color:#666666;text-decoration:underline;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:8pt;color:#666666;font-size:11pt;padding-bottom:0pt;font-family:"Trebuchet MS";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style><div><p class="c28"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 77.33px;"><img alt="loga_www.png" src="Lista%203%20-%20SQL%20%282017%29%20-%20pytania%20i%20rozwi%C4%85zania_files/FJKS-COuHjS1su_yWzJD5Zk2dI-XEkXbP_wmt5SngOgRt-dVwZ3UNUz0KsPQ.png" style="width: 624.00px; height: 77.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c15"><span class="c14"></span></p><p class="c28"><span class="c14">Materiały sfinansowane w ramach Zadania 5, kat. 17 </span></p><p class="c28"><span class="c25 c31">w projekcie "Informatyka na Uniwersytecie Wrocławskim źródłem sukcesu zawodowego"</span></p></div><h1 class="c32" id="h.idd1mnugjk21"><span class="c22">Lista zadań SQL 3 - pytania i odpowiedzi</span></h1><hr><p class="c21 c15"><span class="c6"></span></p><p class="c21"><span class="c5">Zadanie 1:</span></p><p class="c26"><span class="c6 c25">Wykonaj następujące operacje zmiany schematu i zawartości tabeli semestr.</span></p><ol class="c12 lst-kix_geg53g1748e-0 start" start="1"><li class="c13"><span class="c29">Zdefiniuj dziedzinę semestry z dwiema wartościami: 'zimowy' i 'letni' oraz niedopuszczalną wartością pustą.</span><span class="c6">&nbsp;</span></li></ol><p class="c0 c15"><span class="c1"></span></p><a id="t.db04665e4e23a3f4a98dfa64b1d6ba86e1070770"></a><a id="t.0"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c3">-- 1.1.</span></p><p class="c0"><span class="c10">-- typ bazowy dziedziny to </span><span class="c8">text</span><span class="c3">;</span></p><p class="c0"><span class="c3">-- do dziedziny należą tylko dwie wartości </span></p><p class="c0"><span class="c10">-- i nie jest dopuszczalny </span><span class="c8">NULL</span></p><p class="c0"><span class="c1"><br>CREATE DOMAIN semestry AS text </span></p><p class="c0"><span class="c1">CHECK (VALUE IN ('zimowy','letni')) NOT NULL;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_geg53g1748e-0" start="2"><li class="c13"><span>Zdefiniuj sekwencję </span><span class="c17">numer_semestru</span><span class="c6">&nbsp;i nadaj jej wartość równą pierwszej nieużywanej liczbie w kolumnie semestr_id.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.012d427fe9c410029276c9a1703b2d73898e19e2"></a><a id="t.1"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c19 c9">-- 1.2</span></p><p class="c0 c15"><span class="c3"></span></p><p class="c0"><span class="c10">-- utworzenie sekwencji o podanej nazwie<br></span><span class="c1">CREATE SEQUENCE numer_semestru;<br></span></p><p class="c0"><span class="c3">-- dla relacji semestr wymaczamy max(semestr_id)</span></p><p class="c0"><span class="c3">-- i używamy tej wartości jako argumentu setval;</span></p><p class="c0"><span class="c3">-- warto zwrócić uwage na specyficzny sposób wywołania funkcji</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">SELECT setval('numer_semestru',max(semestr_id)) </span></p><p class="c0"><span class="c1">FROM semestr;<br></span></p><p class="c0"><span class="c3">-- utworzoną sekwencję przypisujemy jako wartość domyślną</span></p><p class="c0"><span class="c3">-- kolumny semestr_id w tabeli semestry;</span></p><p class="c0"><span class="c3">-- dokładniej przypisujemy funkcję zwracającą kolejną</span></p><p class="c0"><span class="c3">-- wartość sekwencji;</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">ALTER TABLE semestr ALTER COLUMN semestr_id </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;SET DEFAULT nextval('numer_semestru');</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c3">-- wiążemy sekwencję z kolumną semestr.semestr_id; </span></p><p class="c0"><span class="c3">-- usunięcie tej kolumny sprawi, że usunięta też</span></p><p class="c0"><span class="c3">-- zostanie sekwencja</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c8">ALTER SEQUENCE numer_semestru OWNED BY semestr.semestr_id;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_geg53g1748e-0" start="3"><li class="c13"><span class="c6">Do tabeli semestr dodaj dwa nowe atrybuty:</span></li></ol><ol class="c12 lst-kix_geg53g1748e-1 start" start="1"><li class="c24"><span class="c17">semestr </span><span class="c6">– kolumnę typu semestry;</span></li><li class="c24"><span class="c17">rok </span><span class="c6">– kolumnę typu tekstowego opisującą rok akademicki w formacie: '2010/2011';</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.7a7063bc8221726c8b0e9c46a3b5e0308d688611"></a><a id="t.2"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c19 c9">-- 1.3</span></p><p class="c0 c15"><span class="c3"></span></p><p class="c0"><span class="c3">-- tworzymy kolumnę semestr w tabeli semestry;</span></p><p class="c0"><span class="c3">-- ma ona typ semestry i, dodatkowo, wartość domyślną</span></p><p class="c0"><span class="c3">-- równą ‘zimowy’; </span></p><p class="c0"><span class="c3">-- ostatnie jest potrzebne, bo typ semestry nie akceptuje</span></p><p class="c0"><span class="c3">-- NULL-i i w nową kolumnę trzeba wpisać jakieś wartości</span></p><p class="c0 c15"><span class="c3"></span></p><p class="c0"><span class="c1">ALTER TABLE semestr ADD COLUMN semestr semestry DEFAULT 'zimowy';<br></span></p><p class="c0"><span class="c3">-- nowa kolumna rok jest słowem 9-znakowym</span></p><p class="c0 c15"><span class="c3"></span></p><p class="c0"><span class="c1">ALTER TABLE semestr ADD COLUMN rok char(9);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_geg53g1748e-0" start="4"><li class="c13"><span class="c6">Wypełnij
 kolumny semestr i rok rozbijając nazwę każdego semestru na typ semestru
 i rok akademicki (sprawdź w dokumentacji PostgreSQL, jakie funkcje 
tekstowe są dostępne).</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.7d9b038693ce46d7b9a220d48fc6dd308cd90321"></a><a id="t.3"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 1.4</span><span class="c3"><br></span></p><p class="c0"><span class="c3">-- ustawiamy semestr na zimowy - </span></p><p class="c0"><span class="c3">-- ten krok można pominąć, bo jest to wartość domyślna</span></p><p class="c0"><span class="c3">-- i już została wstępnie wpisana wszystkim semestrom</span></p><p class="c0"><span class="c8"><br></span><span class="c9">-- </span><span class="c9 c27">UPDATE semestr SET semestr='zimowy'</span><span class="c19 c9">&nbsp;</span></p><p class="c0"><span class="c9">-- </span><span class="c9 c27 c34">WHERE nazwa LIKE '%zimowy%';</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c10">-- ustawiamy semestr letni w letnich semestrach</span></p><p class="c0"><span class="c1"><br>UPDATE semestr SET semestr='letni' WHERE nazwa LIKE '%letni%';<br></span></p><p class="c0"><span class="c3">-- z nazwy semestru “wycinamy” rok zapisany w formacie </span></p><p class="c0"><span class="c3">-- yyyy/yyyy i przypisujemy jego wartość kolumnie rok;</span></p><p class="c0"><span class="c10">-- używane funkcje tekstowe to </span><span class="c8">substring</span><span class="c8">&nbsp;</span><span class="c10">i </span><span class="c8">position</span><span class="c3">;</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">UPDATE semestr </span></p><p class="c0"><span class="c1">SET rok = </span></p><p class="c0"><span class="c8">&nbsp; &nbsp; substring(nazwa FROM position('/' IN nazwa)-4 FOR 9);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_geg53g1748e-0" start="5"><li class="c18"><span class="c6">Usuń z tabeli semestr kolumnę nazwa.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.48ba96d242ed4e4cf5900ff4fc38e2c9bd7221bf"></a><a id="t.4"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 1.5<br></span><span class="c8"><br>ALTER TABLE semestr DROP COLUMN nazwa;</span><span class="c6"><br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_geg53g1748e-0" start="6"><li class="c13"><span class="c6">Dodaj
 do kolumn semestr i rok wartości domyślne, które dla bieżącej daty od 
stycznia do czerwca (włącznie) ustawiają domyślny semestr letni i rok 
(x-1)/x; a dla &nbsp;daty od lipca do grudnia (włącznie) - semestr 
zimowy i rok x/(x+1) (sprawdź w dokumentacji PostgreSQL dostępne funkcje
 daty i czasu).</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.d9f1ada497c060a11e486c79d211d3bd0e8c01e6"></a><a id="t.5"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 1.6<br></span><span class="c8"><br></span><span class="c3">-- usuwamy poprzednią wartość domyślną dla kolumny semestr</span></p><p class="c0"><span class="c10">-- (była ustawiona na ‘zimowy’)</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">ALTER TABLE semestr ALTER COLUMN semestr DROP DEFAULT;</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c3">-- aktualny miesiąc odczytujemy z daty funkcją </span></p><p class="c0"><span class="c3">-- EXTRACT(MONTH FROM current_date);</span></p><p class="c0"><span class="c3">-- wyrażenie CASE pozwala wybrać wartość w zależności</span></p><p class="c0"><span class="c3">-- od warunku logicznego: </span></p><p class="c0"><span class="c3">-- CASE WHEN warunek1 THEN wartosc1</span></p><p class="c0"><span class="c3">-- &nbsp; &nbsp; &nbsp;WHEN warunek2 THEN wartosc2…</span></p><p class="c0"><span class="c3">-- &nbsp; &nbsp; &nbsp;ELSE wartosc</span></p><p class="c0"><span class="c3">-- operator konkatenacji to ||</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">ALTER TABLE semestr ALTER COLUMN semestr SET DEFAULT<br> &nbsp;CASE WHEN extract(month FROM current_date) BETWEEN 1 AND 6<br> &nbsp; &nbsp;THEN 'letni' ELSE 'zimowy'<br> &nbsp;END;<br></span></p><p class="c0"><span class="c8">ALTER TABLE semestr ALTER COLUMN rok SET DEFAULT<br> &nbsp;CASE WHEN extract(month FROM current_date) BETWEEN 1 AND 6<br> &nbsp; &nbsp;THEN extract(year FROM current_date)-1||'/'||extract(year FROM current_date)<br> &nbsp; &nbsp;ELSE extract(year FROM current_date)||'/'||extract(year FROM current_date)+1<br> &nbsp;END;</span></p></td></tr></tbody></table><p class="c21 c15"><span class="c6"></span></p><p class="c21 c15"><span class="c5"></span></p><p class="c21"><span class="c5">Zadanie 2:</span></p><p class="c21"><span>Dodaj nowy semestr </span><span class="c17">letni </span><span>i </span><span class="c17">zimowy </span><span>na rok akademicki </span><span class="c17">2013/2014</span><span class="c6">. </span></p><ol class="c12 lst-kix_gwu02booh45b-0 start" start="1"><li class="c13"><span>Zdefiniuj sekwencje </span><span class="c17">numer_przedmiot_semestr</span><span>&nbsp;i </span><span class="c17">numer_grupy</span><span>&nbsp;nadając im odpowiednio </span><span class="c27 c17">maksymalny </span><span class="c6">numer kod_przed_sem i kod_grupy.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.44192d97fdd07cbdf2092618a722683e9ca38f81"></a><a id="t.6"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c19 c9">-- 2.0</span></p><p class="c0"><span class="c3">-- do tabeli semestr wstawiamy dwie krotki podając tylko</span></p><p class="c0"><span class="c10">-- ich atrybuty: </span><span class="c8">semestr </span><span class="c10">i </span><span class="c8">rok</span><span class="c3">;</span></p><p class="c0"><span class="c10">-- pole </span><span class="c8">semestr_id</span><span class="c3">&nbsp;jest ma wartość domyślną, </span></p><p class="c0"><span class="c10">-- automatycznie generowaną przez sekwencję numer_semestru</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">INSERT INTO semestr(semestr,rok) VALUES</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;('zimowy','2013/2014'), </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;('letni','2013/2014');</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c9">-- 2.1</span><span class="c8"><br></span><span class="c10">-- sekwencje generujące automatycznie </span><span class="c8">kod_przed_sem</span><span class="c3">&nbsp;oraz</span></p><p class="c0"><span class="c10">-- </span><span class="c8">kod_grupy</span><span class="c3">&nbsp;tworzymy i przypisujemy do kolumny analogicznie,</span></p><p class="c0"><span class="c3">-- jak sekwencję numer_semestru dla kolumny semestr_id</span></p><p class="c0"><span class="c1"><br>CREATE SEQUENCE numer_przedmiot_semestr;<br>SELECT setval('numer_przedmiot_semestr',max(kod_przed_sem)) FROM przedmiot_semestr;<br>ALTER TABLE przedmiot_semestr </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;ALTER COLUMN kod_przed_sem </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;SET DEFAULT nextval('numer_przedmiot_semestr');<br>ALTER SEQUENCE numer_przedmiot_semestr </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;OWNED BY przedmiot_semestr.kod_przed_sem;<br><br>CREATE SEQUENCE numer_grupy;<br>SELECT setval('numer_grupy',max(kod_grupy)) FROM grupa;<br>ALTER TABLE grupa </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;ALTER COLUMN kod_grupy </span></p><p class="c0"><span class="c8">&nbsp; &nbsp;SET DEFAULT nextval('numer_grupy');<br>ALTER SEQUENCE numer_grupy OWNED BY grupa.kod_grupy;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_gwu02booh45b-0" start="2"><li class="c13"><span class="c6">Utwórz
 w zdefiniowanych semestrach edycje wszystkich przedmiotów typu 
obowiązkowego i podstawowego, które odbyły się w roku akademickim 
2010/2011. Tworząc edycje używaj sekwencji, by nadać im unikalny kod. </span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.3648441c425138f92794118cbc0bcfdd55d81c77"></a><a id="t.7"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c19 c9">-- 2.2<br></span></p><p class="c0"><span class="c3">-- skorzystamy z wersji polecenia:</span></p><p class="c0"><span class="c3">-- INSERT INTO tabela(lista_atrybutów) zapytanie_SELECT;</span></p><p class="c0"><span class="c3">-- będziemy wstawiać krotki o atrybutach: </span></p><p class="c0"><span class="c3">-- semestr_id, kod_przed, strona_domowa, angielski</span></p><p class="c0"><span class="c3">-- wartość pierwszego atrybutu (numer semestru zimowego</span></p><p class="c0"><span class="c3">-- lub letniego z 2013/14 musimy odzyskać z bazy z relacji</span></p><p class="c0"><span class="c3">-- semestr)</span></p><p class="c0"><span class="c3">-- wartości pozostałych także odczytujemy z bazy znajdując</span></p><p class="c0"><span class="c3">-- dane wszystkich przedmiotów obowiązkowych i podstawowych</span></p><p class="c0"><span class="c3">-- które były prowadzone w roku 2010/2011.</span></p><p class="c0"><span class="c1">&nbsp;<br>INSERT INTO przedmiot_semestr &nbsp; &nbsp;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;(semestr_id,kod_przed,strona_domowa, angielski) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;SELECT s1.semestr_id, p.kod_przed, strona_domowa, angielski<br> &nbsp; FROM semestr s1, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; przedmiot p JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; przedmiot_semestr ps USING(kod_przed) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; semestr s USING(semestr_id) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;WHERE rodzaj IN ('p', 'o') AND </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s.rok='2010/2011' AND </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s.semestr=s1.semestr AND </span></p><p class="c0"><span class="c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;s1.rok='2013/2014';</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_gwu02booh45b-0" start="3"><li class="c13"><span class="c6">Dla
 każdego przedmiotu w semestrze zdefiniuj grupę wykładową, bez terminu, 
bez prowadzącego i bez sali z limitem (max_osoby) równym 100. Jeśli w 
zdefiniowaniu grupy przeszkadzają Ci jakieś więzy tabeli, to je usuń. 
Dodając grupy używaj sekwencji numer_grupy.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.ce79cacf41d4b5bf494cfc327ac73ef6c8a630f8"></a><a id="t.8"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 2.3</span><span class="c3"><br>-- jak poprzednio korzystamy z wersji INSERT INTO wstawiającej</span></p><p class="c0"><span class="c3">-- do tabeli wynik zapytania SELECT;</span></p><p class="c0"><span class="c3">-- w zapytaniu wybieramy odpowiedni kod_przed_sem,</span></p><p class="c0"><span class="c3">-- a atrybuty rodzaj_zajec i max_osoby uzupełniamy stałymi</span></p><p class="c0"><span class="c1"><br>INSERT INTO grupa(kod_przed_sem,max_osoby,rodzaj_zajec) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;SELECT kod_przed_sem,100,'w' </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FROM przedmiot_semestr JOIN semestr USING(semestr_id) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;WHERE rok='2013/2014';</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c3">-- BŁĄD: &nbsp;pusta wartość w kolumnie "kod_uz" narusza ograniczenie wymaganej wartości</span></p><p class="c0"><span class="c3">DETAIL: &nbsp;Niepoprawne ograniczenia wiersza (6121, 4220, null, 100, w, null, null).</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">ALTER TABLE grupa ALTER COLUMN kod_uz DROP NOT NULL;</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c3">-- teraz można powtórzyć INSERT:</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">INSERT INTO grupa(kod_przed_sem,max_osoby,rodzaj_zajec) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;SELECT kod_przed_sem,100,'w' </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FROM przedmiot_semestr JOIN semestr USING(semestr_id) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;WHERE rok='2013/2014';</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c3">-- Zapytanie zostało wykonane: dotyczyło 73 wierszy, w czasie 45 ms.</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_gwu02booh45b-0" start="4"><li class="c13"><span class="c6">Sprawdź, czy udało Ci się zdefiniować wymagane grupy, czyli zadaj zapytanie wyszukujące je.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.7af32dccd534ad7b1e314e4d9ead9d2c708d75d2"></a><a id="t.9"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 2.4<br></span><span class="c1"><br>SELECT kod_grupy, nazwa, rodzaj_zajec, max_osoby </span></p><p class="c0"><span class="c1">FROM grupa JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;przedmiot_semestr USING(kod_przed_sem) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;przedmiot USING(kod_przed) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;semestr USING(semestr_id) </span></p><p class="c0"><span class="c8">WHERE rok='2013/2014';</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><p class="c21"><span class="c5">Zadanie 3:</span></p><ol class="c12 lst-kix_pc83f1nrnctg-0 start" start="1"><li class="c13"><span>Załóż tabele: </span><span class="c17">pracownik</span><span>&nbsp;oraz </span><span class="c17">student</span><span class="c6">. Dla każdej tabeli zdefiniuj właściwe dla niej pola występujące w tabeli uzytkownik. </span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.fa484de042901dc4c9ee00d7bfde00eb136db349"></a><a id="t.10"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 3.1<br></span><span class="c3">-- skorzystamy z wersji CREATE TABLE… LIKE, która kopiuje </span></p><p class="c0"><span class="c3">-- nazwy i typy kolumn z innej tablicy;</span></p><p class="c0"><span class="c3">-- domyślnie kopiuje także więzy NOT NULL; inne więzy</span></p><p class="c0"><span class="c3">-- można także skopiować, ale trzeba tego jawnie zażądać </span></p><p class="c0"><span class="c10">-- (w razie potrzeby sprawdź w dokumentacji </span><span class="c10"><a class="c20" href="https://www.google.com/url?q=http://www.postgresql.org/docs/9.3/static/sql-createtable.html&amp;sa=D&amp;ust=1497901041687000&amp;usg=AFQjCNHUE08N2G67SzrL-hnl2B5LY40lpA">PostgreSQL</a></span><span class="c3">);</span></p><p class="c0"><span class="c3">-- z tabeli pracownik usuwamy niepotrzebną kolumnę semestr;</span></p><p class="c0"><span class="c10">-- więzy klucza obcego tworzymy jawnie;</span></p><p class="c0"><span class="c1"><br>CREATE TABLE pracownik (LIKE uzytkownik);<br>ALTER TABLE pracownik DROP COLUMN semestr;<br>ALTER TABLE pracownik ADD CONSTRAINT pk_pracownik </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;PRIMARY KEY(kod_uz);<br><br>CREATE TABLE student (LIKE uzytkownik);<br>ALTER TABLE student ADD CONSTRAINT pk_student </span></p><p class="c0"><span class="c8">&nbsp; &nbsp;PRIMARY KEY(kod_uz);<br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_pc83f1nrnctg-0" start="2"><li class="c18"><span class="c6">Wpisz do tabeli pracownik wszystkie osoby, które kiedykolwiek prowadziły zajęcia. </span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.f8b79015267bec0e409dcc25e859eaeb9c6cc5f9"></a><a id="t.11"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9 c19">-- 3.2</span></p><p class="c0"><span><br></span><span class="c8">INSERT INTO pracownik(kod_uz, imie, nazwisko)<br>SELECT kod_uz, imie, nazwisko FROM uzytkownik<br>WHERE kod_uz IN (SELECT kod_uz FROM grupa);</span><span class="c6"><br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_pc83f1nrnctg-0" start="3"><li class="c18"><span class="c6">Wpisz do tabeli student osoby, które kiedykolwiek uczęszczały na zajęcia. </span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.ec9513a1b9323184915beaf765fefb338b7a58fb"></a><a id="t.12"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 3.3<br></span><span class="c8"><br>INSERT INTO student(kod_uz, imie, nazwisko,semestr)<br>SELECT kod_uz, imie, nazwisko, semestr FROM uzytkownik<br>WHERE kod_uz IN (SELECT kod_uz FROM wybor);<br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_pc83f1nrnctg-0" start="4"><li class="c13"><span>Przekieruj klucze obce wskazujące na tabelę </span><span class="c17">uzytkownik</span><span class="c6">&nbsp;tak, by wskazywały teraz odpowiednio na tabele pracownik i student. Usuń tabelę uzytkownik.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.6754bcb5f0959d0077f289cbe8cf7f32f4358084"></a><a id="t.13"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 3.4</span><span class="c3"><br>-- “przekierowanie” kluczy obcych, to usunięcie niepotrzebnych</span></p><p class="c0"><span class="c3">-- i zdefiniowanie nowych;</span></p><p class="c0"><span class="c1"><br>ALTER TABLE wybor DROP CONSTRAINT fk_wybor_uz;<br>ALTER TABLE wybor ADD CONSTRAINT fk_wybor_st </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FOREIGN KEY (kod_uz) REFERENCES student(kod_uz) DEFERRABLE;<br>ALTER TABLE grupa DROP CONSTRAINT fk_grupa_uz;<br>ALTER TABLE grupa ADD CONSTRAINT fk_grupa_pr </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FOREIGN KEY (kod_uz) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;REFERENCES pracownik(kod_uz) </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;DEFERRABLE;<br>DROP TABLE uzytkownik;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><p class="c21"><span class="c5">Zadanie 4:</span></p><ol class="c12 lst-kix_e19x04ky1hgp-0 start" start="1"><li class="c13"><span>Zdefiniuj dziedzinę </span><span class="c17">rodzaje_zajec</span><span class="c6">&nbsp;tak,
 by nie dopuszczała wartości pustych i obejmowała wszystkie występujące w
 tej chwili rodzaje zajęć w wersji małej i dużej (litery). </span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.e32dd2e2ce6bbd06e4f640104453e4f5663c113e"></a><a id="t.14"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c19 c9">-- 4.1</span></p><p class="c0"><span class="c10">-- sprawdzamy, jakie wartości występują w polu rodzaj_zajec</span></p><p class="c0"><span class="c1"><br>SELECT DISTINCT rodzaj_zajec FROM grupa ORDER BY 1;<br></span></p><p class="c0"><span class="c3">-- tworzymy dziedzinę ograniczając zakres jej wartości</span></p><p class="c0"><span class="c3">-- do tych, które zobaczyliśmy w poprzednim zapytaniu</span></p><p class="c0"><span class="c1"><br>CREATE DOMAIN rodzaje_zajec AS char(1) NOT NULL<br>CHECK (VALUE IN ('w','s','r','p','P','e','c','C','l','g'));</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_e19x04ky1hgp-0" start="2"><li class="c13"><span class="c6">Zmień tabelę grupa tak, by używała zdefiniowanej dziedziny zamiast typu char(1) w kolumnie rodzaj_zajec.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.41c033c05c1460c3a650a06f1f05445e44c0dbcf"></a><a id="t.15"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 4.2</span><span class="c3"><br>-- polecenie ALTER TABLE ma też opcję zmiany typu kolumny</span></p><p class="c0"><span class="c10">-- (patrz ALTER TABLE w dokumentacji </span><span class="c10"><a class="c20" href="https://www.google.com/url?q=http://www.postgresql.org/docs/9.3/static/sql-altertable.html&amp;sa=D&amp;ust=1497901041717000&amp;usg=AFQjCNFS_ogIUUkXRusZrR3mq5ES6Y2jgg">PostgreSQL</a></span><span class="c3">);</span></p><p class="c0"><span class="c3">-- zmiana powiedzie się tylko wtedy, gdy system uznaje</span></p><p class="c0"><span class="c3">-- za możliwą konwersję typów</span></p><p class="c0"><span class="c1"><br>ALTER TABLE grupa ALTER COLUMN rodzaj_zajec</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;TYPE rodzaje_zajec;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_e19x04ky1hgp-0" start="3"><li class="c13"><span>Zdefiniuj perspektywę </span><span class="c17">obsada_zajec_view</span><span class="c6">&nbsp;o
 polach: prac_kod, prac_nazwisko, przed_kod, przed_nazwa, rodzaj_zajec, 
liczba_grup, liczba_studentow. Pola prac_kod i prac_nazwa mają oznaczać 
prowadzącego zajęcia, a pola przed_kod i przed_nazwa - oczywiście 
przedmiot. Pole rodzaj_zajec ma być typu rodzaje_zajec. W polach 
liczba_grup i liczba_studentow mają być liczby (odpowiednio) grup i osób
 (z powtórzeniami), które uczęszczały na zajęcia danego typu do danego 
przedmiotu do danej osoby.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.b12ad1e6cb186120bf4b06b78770c6185f7020de"></a><a id="t.16"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 4.3</span><span class="c3"><br>-- w definicji perspektywy najwazniejsza jest umiejętność</span></p><p class="c0"><span class="c3">-- zdefiniowania zapytania definiującego wartość perspektywy;</span></p><p class="c0"><span class="c3">-- reszta to tylko nazwa perspektywy i, ewentualnie,</span></p><p class="c0"><span class="c3">-- nazwy jej kolum, o ile nie są dziedziczone z zapytania;</span></p><p class="c0"><span class="c1"><br>CREATE VIEW obsada_zajec_view</span></p><p class="c0"><span class="c1">&nbsp; (prac_kod, prac_nazwisko, przed_kod, przed_nazwa, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;rodzaj_zajec, liczba_grup, liczba_studentow) </span></p><p class="c0"><span class="c1">AS<br>SELECT </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;pr.kod_uz, nazwisko, p.kod_przed, p.nazwa, rodzaj_zajec, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;COUNT(DISTINCT kod_grupy), COUNT(w.kod_uz)<br>FROM pracownik pr JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;grupa USING(kod_uz) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;wybor w USING(kod_grupy) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;przedmiot_semestr USING(kod_przed_sem) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;przedmiot p USING(kod_przed)<br>GROUP BY </span></p><p class="c0"><span class="c8">&nbsp; &nbsp; &nbsp;pr.kod_uz, nazwisko, p.kod_przed, nazwa, rodzaj_zajec;<br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_e19x04ky1hgp-0" start="4"><li class="c13"><span>Zdefiniuj tabelę </span><span class="c17">obsada_zajec_tab</span><span class="c6">&nbsp;o schemacie analogicznym, jak powyższa perspektywa. Wypełnij ją danymi.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.00fedd51849fc34130df865c6d40f37dbe0db5d0"></a><a id="t.17"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 4.4<br></span><span class="c1"><br>CREATE TABLE obsada_zajec_tab(</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;prac_kod int, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;prac_nazwisko text, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;przed_kod int, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;przed_nazwa text, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;rodzaj_zajec rodzaje_zajec, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;liczba_grup bigint, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;liczba_studentow bigint);<br><br>INSERT INTO obsada_zajec_tab<br> &nbsp; SELECT </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; pr.kod_uz, nazwisko, p.kod_przed, p.nazwa, rodzaj_zajec,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; count(DISTINCT kod_grupy), count(w.kod_uz)<br> &nbsp; FROM pracownik pr JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; grupa USING(kod_uz) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; wybor w USING(kod_grupy) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; przedmiot_semestr USING(kod_przed_sem) JOIN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; przedmiot p USING(kod_przed)<br> &nbsp; GROUP BY </span></p><p class="c0"><span class="c8">&nbsp; &nbsp; &nbsp; pr.kod_uz, nazwisko, p.kod_przed, nazwa, rodzaj_zajec;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_e19x04ky1hgp-0" start="5"><li class="c13"><span class="c6">Korzystając
 z perspektywy znajdź dla każdego przedmiotu obowiązkowego i 
podstawowego osobę, która uczyła najwięcej osób tego przedmiotu. 
&nbsp;Następnie zrób to samo korzystając z tabeli i sprawdź czy 
występuje widoczna różnica w czasie wykonania.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.93c289e4449b3571d581df2eeafb5035aafc670e"></a><a id="t.18"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 4.5</span><span class="c3"><br>-- polecenie EXPLAIN zapytanie_SELECT pokazuje plan,</span></p><p class="c0"><span class="c3">-- według którego system zamierza obliczyć zapytanie;</span></p><p class="c0"><span class="c3">-- polecenie EXPLAIN ANALYZE zapytanie_SELECT wykonuje</span></p><p class="c0"><span class="c3">-- zapytanie i pokazuje, jak zostało to zrobione;</span></p><p class="c0"><span class="c8"><br>EXPLAIN ANALYZE SELECT prac_nazwisko, przed_nazwa<br>FROM obsada_zajec_view o JOIN przedmiot ON (kod_przed=przed_kod)<br>WHERE rodzaj IN ('o','p')<br>GROUP BY prac_kod,o.przed_kod, o.prac_nazwisko, przed_nazwa<br>HAVING sum(liczba_studentow)&gt;=<br> &nbsp;ALL(SELECT sum(liczba_studentow)<br> &nbsp; &nbsp; &nbsp;FROM obsada_zajec_view o1 JOIN przedmiot ON (przed_kod=kod_przed)<br> &nbsp; &nbsp; &nbsp;WHERE o1.przed_kod=o.przed_kod<br> &nbsp; &nbsp; &nbsp;GROUP BY prac_kod);<br><br></span><span class="c10">-- 2605.687 ms</span><span class="c8"><br><br>EXPLAIN ANALYZE SELECT prac_nazwisko, przed_nazwa<br>FROM obsada_zajec_tab o JOIN przedmiot ON (kod_przed=przed_kod)<br>WHERE rodzaj IN ('o','p')<br>GROUP BY prac_kod,o.przed_kod, o.prac_nazwisko, przed_nazwa<br>HAVING sum(liczba_studentow)&gt;=<br> &nbsp;ALL(SELECT sum(liczba_studentow)<br> &nbsp; &nbsp; &nbsp;FROM obsada_zajec_tab o1 JOIN przedmiot ON (przed_kod=kod_przed)<br> &nbsp; &nbsp; &nbsp;WHERE o1.przed_kod=o.przed_kod<br> &nbsp; &nbsp; &nbsp;GROUP BY prac_kod);<br><br></span><span class="c10">-- 44.173 ms</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><p class="c21"><span class="c5">Zadanie 5:</span></p><p class="c21"><span class="c6">W tym zadaniu bazę danych uzupełnimy o dane o praktykach zawodowych.</span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0 start" start="1"><li class="c18"><span>Załóż tabelę </span><span class="c17">firma</span><span class="c6">&nbsp;o atrybutach (pamiętaj o kluczach i ograniczeniach &nbsp;NULL/NOT NULL):</span></li></ol><ul class="c12 lst-kix_bmiamcwxh7zg-1 start"><li class="c2"><span class="c6">kod_firmy - unikalny kod generowany przez sekwencję;</span></li><li class="c2"><span class="c6">nazwa - pole niepuste,</span></li><li class="c2"><span class="c6">adres - pole niepuste,</span></li><li class="c2"><span class="c6">kontakt - pole niepuste.</span></li></ul><p class="c11"><span class="c6"></span></p><a id="t.b59e7b6c30873c7047f45a5909c1a4ecf1a22acd"></a><a id="t.19"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.1<br></span><span class="c1"><br>CREATE TABLE firma<br>(kod_firmy SERIAL PRIMARY KEY,<br> nazwa text NOT NULL,<br> adres text NOT NULL,<br> kontakt text NOT NULL);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="2"><li class="c18"><span class="c6">Wpisz krotki: (SNS, Wrocław, H.Kloss); (BIT, Kraków, R.Bruner); (MIT, Berlin, J.Kos);</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.f1357609df83d0aa3aff040b2dc699c9fde86316"></a><a id="t.20"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.2<br></span><span class="c8"><br>INSERT INTO firma(nazwa,adres,kontakt) VALUES<br>('SNS','Wrocław','H.Kloss'),<br>('BIT','Kraków','R.Bruner'),<br>('MIT','Berlin','J.Kos');</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="3"><li class="c18"><span>Załóż tabelę </span><span class="c17">oferta_praktyki</span><span class="c6">&nbsp;o atrybutach:</span></li></ol><ul class="c12 lst-kix_bmiamcwxh7zg-1 start"><li class="c2"><span class="c6">kod_oferty - automatycznie generowany unikalny klucz tablicy firma,</span></li><li class="c2"><span class="c6">kod_firmy - klucz obcy do tablicy firmy;</span></li><li class="c2"><span class="c6">semestr_id - klucz obcy do tablicy semestr;</span></li><li class="c2"><span class="c6">liczba_miejsc - liczba dodatnia;</span></li></ul><p class="c11"><span class="c6"></span></p><a id="t.76565f16a54c2ac04291c17d649db89a18d44a8d"></a><a id="t.21"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.3<br></span><span class="c1"><br>CREATE TABLE oferta_praktyki<br>( kod_oferty SERIAL PRIMARY KEY,<br> &nbsp;kod_firmy int NOT NULL REFERENCES firma(kod_firmy),<br> &nbsp;semestr_id int REFERENCES semestr(semestr_id),<br> &nbsp;liczba_miejsc int);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="4"><li class="c18"><span class="c6">Wpisz na semestr letni 2013/14 oferty: SNS (3 miejsc) i MIT (2 miejsca);</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.4ad346c1766010301636cc2627ec740b13c118eb"></a><a id="t.22"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.4<br></span><span class="c1"><br>INSERT INTO oferta_praktyki(kod_firmy,semestr_id,liczba_miejsc)<br> &nbsp; SELECT kod_firmy,semestr_id,3 </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FROM firma,semestr </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;WHERE firma.nazwa='SNS' AND rok='2013/2014' </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AND semestr='letni';<br><br>INSERT INTO oferta_praktyki(kod_firmy,semestr_id,liczba_miejsc)<br> &nbsp; SELECT kod_firmy,semestr_id,2 </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;FROM firma,semestr </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;WHERE firma.nazwa='MIT' AND rok='2013/2014' </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AND semestr='letni';<br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="5"><li class="c18"><span>Załóż tabelę </span><span class="c17">praktyki </span><span class="c6">o atrybutach:</span></li></ol><ul class="c12 lst-kix_bmiamcwxh7zg-1 start"><li class="c2"><span class="c6">student - kod studenta,</span></li><li class="c2"><span class="c6">opiekun - kod pracownika i klucz obcy do tabeli pracownik,</span></li><li class="c2"><span class="c6">oferta - kod oferty i klucz obcy do tabeli oferta_praktyki.</span></li></ul><p class="c11"><span class="c6"></span></p><a id="t.93eeb330aa872cf89446a4380a3cc8524e48be83"></a><a id="t.23"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.5</span><span class="c1"><br><br>CREATE TABLE praktyki<br>(student int NOT NULL REFERENCES student,<br> opiekun int REFERENCES pracownik,<br> oferta int NOT NULL REFERENCES oferta_praktyki);<br></span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="6"><li class="c18"><span class="c6">(*) Wypełnij wszystkie wolne miejsca na praktykach studentami z semestru pomiędzy 6 i 10, którzy jeszcze nie zaliczyli praktyki.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.8d79753083d23d1641ead37a516651a75b62cb68"></a><a id="t.24"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.6</span><span class="c3"><br>-- zapytanie zrobimy raczej mało efektywnie:</span></p><p class="c0"><span class="c3">-- wybierzemy jednego studenta z semestru 6..10, </span></p><p class="c0"><span class="c3">-- który jeszcze nie odbył praktyki (np. tego </span></p><p class="c0"><span class="c3">-- o największym indeksie), oraz jedną praktykę </span></p><p class="c0"><span class="c3">-- na ostatni semestr (np. o największym kodzie)</span></p><p class="c0"><span class="c3">-- i taką parę student-praktyka wpiszemy do tabeli praktyk;</span></p><p class="c0"><span class="c3">-- następnym zapytaniem zmniejszamy liczbę ofert praktyki</span></p><p class="c0"><span class="c3">-- o największym numerze na ostatni semestr </span></p><p class="c0"><span class="c3">-- i niezerowej liczbie ofer (jeśli w bazie nic </span></p><p class="c0"><span class="c3">-- nie stało się pomiędzy poleceniem przypisania praktyki </span></p><p class="c0"><span class="c3">-- i zmniejszeniem liczby praktyk, to jest OK); <br>--</span></p><p class="c0"><span class="c3">-- trzeba powtarzać te zapytania, aż wszystkie praktyki</span></p><p class="c0"><span class="c10">-- zostaną obsadzone lub wszyscy studenci przypisani;<br></span><span class="c8"><br></span><span class="c3">-- dla pewności zamknięmy dwie instrukcje w transakcję</span></p><p class="c0"><span class="c1">BEGIN TRANSACTION;</span></p><p class="c0"><span class="c1">INSERT INTO praktyki(student,oferta)<br>SELECT kod_uz,kod_oferty<br>FROM student s,oferta_praktyki o<br>WHERE kod_uz =<br> &nbsp;(SELECT MAX(kod_uz) FROM student WHERE<br> &nbsp; semestr BETWEEN 6 AND 10 AND kod_uz NOT IN<br> &nbsp; (SELECT student FROM praktyki))<br> &nbsp;AND<br> &nbsp;kod_oferty =<br> &nbsp;(SELECT MAX(kod_oferty) FROM oferta_praktyki<br> &nbsp; WHERE liczba_miejsc &gt; 0 AND semestr_id = <br> &nbsp; &nbsp; &nbsp; &nbsp; (SELECT MAX(semestr_id) FROM semestr));<br><br>UPDATE oferta_praktyki SET liczba_miejsc = liczba_miejsc - 1<br>WHERE kod_oferty =</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;(SELECT MAX(kod_oferty) FROM oferta_praktyki<br> &nbsp; &nbsp;WHERE liczba_miejsc &gt; 0 AND semestr_id =<br> &nbsp; &nbsp; &nbsp; (SELECT MAX(semestr_id) FROM semestr));</span></p><p class="c0"><span class="c1">COMMIT;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="7"><li class="c18"><span class="c6">Sprawdź,
 ilu studentów z semestru od 6 do 10 nie zaliczyło jeszcze praktyki 
oraz, ile pozostało wolnych ofert praktyki na bieżący (największy) 
semestr w bazie.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.c0aef5145573115320e431f3cf225ae88ce6d27b"></a><a id="t.25"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.7</span><span class="c1"><br><br>SELECT COUNT(*) FROM student </span></p><p class="c0"><span class="c1">WHERE semestr BETWEEN 6 AND 10<br> &nbsp; &nbsp; &nbsp;AND kod_uz NOT IN </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;(SELECT student FROM praktyki);<br><br>SELECT SUM(liczba_miejsc) </span></p><p class="c0"><span class="c1">FROM oferta_praktyki<br>WHERE semestr_id = </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp;(SELECT MAX(semestr_id) FROM semestr);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_bmiamcwxh7zg-0" start="8"><li class="c18"><span class="c6">Usuń
 z bazy danych wszystkie oferty, do których nie została stworzona ani 
jedna praktyka i wszystkie firmy, których żadna oferta nie została 
wykorzystana.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.99748fb6ed3e6687385949d4fb3454ed6bf370fd"></a><a id="t.26"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 5.8</span><span class="c1"><br><br>DELETE FROM oferta_praktyki </span></p><p class="c0"><span class="c1">WHERE kod_oferty NOT IN<br> &nbsp;(SELECT oferta FROM praktyki);<br><br>DELETE FROM firma </span></p><p class="c0"><span class="c1">WHERE kod_firmy NOT IN </span></p><p class="c0"><span class="c1">&nbsp; (SELECT kod_firmy FROM oferta_praktyki);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><p class="c21"><span class="c5">Zadanie 6:</span></p><ol class="c12 lst-kix_odev1333usqs-0 start" start="1"><li class="c18"><span>Zdefiniuj perspektywę </span><span class="c17">plan_zajec</span><span class="c6">,
 która pokaże dla każdej osoby, semestru i przedmiotu termin, w jaki 
osoba powinna uczęszczać na zajęcia z tego przedmiotu (także do jakiej 
sali i kto prowadzi zajęcia).</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.7663a1482ee0873b719bc1e1dc19c00bb93c23c9"></a><a id="t.27"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 6.1<br></span><span class="c1"><br>CREATE VIEW plan_zajec(<br> &nbsp;kod_stud,nazwisko_stud,<br> &nbsp;semestr_id,rok,semestr,<br> &nbsp;kod_przed, nazwa_przed,<br> &nbsp;termin, sala, kod_prac, nazwisko_prac) AS<br>SELECT<br> &nbsp;u1.kod_uz,u1.nazwisko,<br> &nbsp;s.semestr_id,rok,s.semestr,<br> &nbsp;p.kod_przed,p.nazwa,<br> &nbsp;termin,sala,u2.kod_uz, u2.nazwisko<br>FROM student u1 JOIN wybor USING(kod_uz)<br> &nbsp; &nbsp; JOIN grupa USING(kod_grupy)<br> &nbsp; &nbsp; JOIN pracownik u2 ON (grupa.kod_uz=u2.kod_uz)<br> &nbsp; &nbsp; JOIN przedmiot_semestr USING(kod_przed_sem)<br> &nbsp; &nbsp; JOIN przedmiot p USING(kod_przed)<br> &nbsp; &nbsp; JOIN semestr s USING(semestr_id);</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_odev1333usqs-0" start="2"><li class="c18"><span class="c6">Wykorzystaj
 perspektywę plan_zajec, by pokazać plan zajęć konkretnego studenta 
(wybierz dowolnie wg kodu) w konkretnym semestrze.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.fab7b4b291a09211332e221f04c6b0b2601d2481"></a><a id="t.28"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 6.2</span><span class="c3"><br>-- wybieramy dowolnego studenta, np. o kodzie 3830</span></p><p class="c0"><span class="c3">-- i dowolny semestr, np. o kodzie 39;</span></p><p class="c0"><span class="c10"><br></span><span class="c1">SELECT</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;nazwisko_stud,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;rok,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;semestr,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;nazwa_przed,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;termin,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;sala,</span></p><p class="c0"><span class="c1">&nbsp; &nbsp;nazwisko_prac<br>FROM plan_zajec<br>WHERE kod_stud = 3830 AND semestr_id = 39;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_odev1333usqs-0" start="3"><li class="c18"><span class="c6">Wykorzystaj
 perspektywę plan_zajec, by pokazać plan zajęć konkretnego pracownika 
(wybierz dowolnie wg kodu) w konkretnym semestrze.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.2784430576ecc95cf5c748019d3f64167da920f4"></a><a id="t.29"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 6.3</span><span class="c10"><br>-- wybieramy dowolnego pracownika (187) i dowolny semestr (39)</span></p><p class="c0"><span class="c1"><br>SELECT DISTINCT </span></p><p class="c0"><span class="c1">&nbsp; &nbsp;nazwisko_prac,rok,semestr,nazwa_przed,termin,sala<br>FROM plan_zajec<br>WHERE kod_prac = 187 AND semestr_id = 39;</span></p></td></tr></tbody></table><p class="c11"><span class="c6"></span></p><ol class="c12 lst-kix_odev1333usqs-0" start="4"><li class="c18"><span class="c6">Wykorzystaj perspektywę plan_zajec, by pokazać plan w konkretnej sali w konkretnym semestrze.</span></li></ol><p class="c11"><span class="c6"></span></p><a id="t.8a45e54ada25fe945ccaa0e4131daf26d5727caf"></a><a id="t.30"></a><table class="c7"><tbody><tr class="c16"><td class="c4" colspan="1" rowspan="1"><p class="c0"><span class="c9">-- 6.5</span></p><p class="c0"><span class="c3">-- wybieramy dowolny semestr (39) i dowolną salę (25); </span></p><p class="c0"><span class="c3">-- pamiętajmy, że atrybut sala to tekst;</span></p><p class="c0 c15"><span class="c1"></span></p><p class="c0"><span class="c1">SELECT DISTINCT nazwa_przed, termin, nazwisko_prac </span></p><p class="c0"><span class="c8">FROM plan_zajec</span></p><p class="c0"><span class="c8">WHERE</span><span class="c10">&nbsp;</span><span class="c1">semestr_id = 39 AND sala = '25';</span></p></td></tr></tbody></table><p class="c21 c15"><span class="c6"></span></p></div><div id="footer"><span>Published by <a target="_blank" title="Learn more about Google Drive" href="https://docs.google.com/">Google Drive</a></span><span class="dash">–</span><a href="https://docs.google.com/abuse?id=197KxK7olU6EUFaYWwp6HmhJtSNQ9UK2zQUb4fMspK1M">Report Abuse</a><span class="dash">–</span><span>Updated automatically every 5 minutes</span></div><script type="text/javascript">(function(){var f;
if(window.jstiming){window.jstiming.a={};window.jstiming.b=1;var m=function(b,a,d){var c=b.t[a],e=b.t.start;if(c&&(e||d))return c=b.t[a][0],void 0!=d?e=d:e=e[0],Math.round(c-e)},n=function(b,a,d){var c,e="";window.jstiming.srt&&(e+="&srt="+window.jstiming.srt,delete window.jstiming.srt);window.jstiming.pt&&(e+="&tbsrt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?e+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?e+="&tran="+window.gtbExternal.tran():
window.chrome&&window.chrome.csi&&(e+="&tran="+window.chrome.csi().tran)}catch(u){}if(c=window.chrome)if(c=c.loadTimes){c().wasFetchedViaSpdy&&(e+="&p=s");if(c().wasNpnNegotiated){var e=e+"&npn=1",k=c().npnNegotiatedProtocol;k&&(e+="&npnv="+(encodeURIComponent||escape)(k))}c().wasAlternateProtocolAvailable&&(e+="&apa=1")}var h=b.t,t=h.start,k=[];c=[];for(var g in h)if("start"!=g&&0!=g.indexOf("_")){var l=h[g][1];l?h[l]&&c.push(g+"."+m(b,g,h[l][0])):t&&k.push(g+"."+m(b,g))}delete h.start;if(a)for(var p in a)e+=
"&"+p+"="+a[p];(a=d)||(a="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return[a,"?v=3","&s="+(window.jstiming.sn||"_s")+"&action=",b.name,c.length?"&it="+c.join(","):"",e,"&rt=",k.join(",")].join("")};window.jstiming.getReportUri=n;var q=function(b,a,d){b=n(b,a,d);if(!b)return"";a=new Image;var c=window.jstiming.b++;window.jstiming.a[c]=a;a.onload=a.onerror=function(){window.jstiming&&delete window.jstiming.a[c]};a.src=b;a=null;return b};f=function(b,
a,d){if("prerender"==document.webkitVisibilityState)return!1;q(b,a,d);return!0};window.jstiming.report=function(b,a,d){if("prerender"==document.webkitVisibilityState){var c=!1,e=function(){c||(a?a.prerender="1":a={prerender:"1"},f(b,a,d)&&(c=!0,document.removeEventListener("webkitvisibilitychange",e,!1)))};document.addEventListener("webkitvisibilitychange",e,!1);return""}return q(b,a,d)};window.jstiming.reportDone=function(b){if(window.jstiming.b<=(b||1))return!1;for(var a in window.jstiming.a)return!1;
return!0};var r=function(b,a,d,c){return 0<d?(c?b.tick(a,c,d):b.tick(a,"",d),!0):!1};window.jstiming.getNavTiming=function(b){if(window.performance&&window.performance.timing){var a=window.performance.timing;r(b,"_dns",a.domainLookupStart)&&r(b,"dns_",a.domainLookupEnd,"_dns");r(b,"_con",a.connectStart)&&r(b,"con_",a.connectEnd,"_con");r(b,"_req",a.requestStart)&&r(b,"req_",a.responseStart,"_req");r(b,"_rcv",a.responseStart)&&r(b,"rcv_",a.responseEnd,"_rcv");if(r(b,"_ns",a.navigationStart)){r(b,"ntsrt_",
a.responseStart,"_ns");r(b,"nsfs_",a.fetchStart,"_ns");var d=!1;try{d=window.external&&window.external.startE}catch(c){}!d&&window.chrome&&window.chrome.csi&&(d=Math.floor(window.chrome.csi().startE));d&&(r(b,"_se",d),r(b,"sens_",a.navigationStart,"_se"));r(b,"ntplt0_",a.loadEventStart,"_ns");r(b,"ntplt1_",a.loadEventEnd,"_ns")}}}};}).call(this);
</script><script type="text/javascript">KX_timer.tick('tl'); if (document.location.protocol == 'https:') {window.jstiming.report(KX_timer, undefined , 'https://gg.google.com/csi');} else {window.jstiming.report(KX_timer);}</script><script type="text/javascript">(function(){var h=this;
function l(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
c&&"undefined"==typeof a.call)return"object";return c}function aa(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=b.slice();c.push.apply(c,arguments);return a.apply(this,c)}}function m(a,c){function b(){}b.prototype=c.prototype;a.o=c.prototype;a.prototype=new b;a.prototype.constructor=a;a.u=function(a,b,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return c.prototype[b].apply(a,d)}};function n(){this.b=this.b;this.a=this.a}n.prototype.b=!1;n.prototype.j=function(){this.b||(this.b=!0,this.f())};n.prototype.f=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function ba(a){a&&"function"==typeof a.j&&a.j()};var p=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ca=/&/g,da=/</g,ea=/>/g,fa=/"/g,ga=/'/g,ha=/\x00/g,ia=/[\x00&<>"']/;function q(a,c){return a<c?-1:a>c?1:0};var ja=Array.prototype.indexOf?function(a,c,b){return Array.prototype.indexOf.call(a,c,b)}:function(a,c,b){b=null==b?0:0>b?Math.max(0,a.length+b):b;if("string"==typeof a)return"string"==typeof c&&1==c.length?a.indexOf(c,b):-1;for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};var t;a:{var u=h.navigator;if(u){var v=u.userAgent;if(v){t=v;break a}}t=""}function w(a){return-1!=t.indexOf(a)};function ka(a,c,b){for(var d in a)c.call(b,a[d],d,a)};function x(a){x[" "](a);return a}x[" "]=function(){};function la(a,c){var b=ma;return Object.prototype.hasOwnProperty.call(b,a)?b[a]:b[a]=c(a)};var y=w("Opera"),z=w("Trident")||w("MSIE"),A=w("Edge"),na=A||z,B=w("Gecko")&&!(-1!=t.toLowerCase().indexOf("webkit")&&!w("Edge"))&&!(w("Trident")||w("MSIE"))&&!w("Edge"),C=-1!=t.toLowerCase().indexOf("webkit")&&!w("Edge"),oa=w("Macintosh");function pa(){var a=h.document;return a?a.documentMode:void 0}var D;
a:{var F="",G=function(){var a=t;if(B)return/rv\:([^\);]+)(\)|;)/.exec(a);if(A)return/Edge\/([\d\.]+)/.exec(a);if(z)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(C)return/WebKit\/(\S+)/.exec(a);if(y)return/(?:Version)[ \/]?(\S+)/.exec(a)}();G&&(F=G?G[1]:"");if(z){var H=pa();if(null!=H&&H>parseFloat(F)){D=String(H);break a}}D=F}var qa=D,ma={};
function I(a){return la(a,function(){for(var c=0,b=p(String(qa)).split("."),d=p(String(a)).split("."),e=Math.max(b.length,d.length),f=0;0==c&&f<e;f++){var g=b[f]||"",k=d[f]||"";do{g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==g[0].length&&0==k[0].length)break;c=q(0==g[1].length?0:parseInt(g[1],10),0==k[1].length?0:parseInt(k[1],10))||q(0==g[2].length,0==k[2].length)||q(g[2],k[2]);g=g[3];k=k[3]}while(0==c)}return 0<=c})}var J;var ra=h.document;
J=ra&&z?pa()||("CSS1Compat"==ra.compatMode?parseInt(qa,10):5):void 0;!B&&!z||z&&9<=Number(J)||B&&I("1.9.1");z&&I("9");function K(){this.a="";this.b=sa}K.prototype.m=!0;K.prototype.l=function(){return this.a};function L(a){return a instanceof K&&a.constructor===K&&a.b===sa?a.a:"type_error:SafeUrl"}var ta=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ua(a){if(a instanceof K)return a;a=a.m?a.l():String(a);ta.test(a)||(a="about:invalid#zClosurez");return va(a)}var sa={};function va(a){var c=new K;c.a=a;return c}va("about:blank");function M(){this.a="";this.b=wa}M.prototype.m=!0;M.prototype.l=function(){return this.a};var wa={};function N(a){var c=new M;c.a=a;return c}N("<!DOCTYPE html>");N("");N("<br>");var xa=!z||9<=Number(J),ya=!z||9<=Number(J),za=z&&!I("9");!C||I("528");B&&I("1.9b")||z&&I("8")||y&&I("9.5")||C&&I("528");B&&!I("8")||z&&I("9");function O(a,c){this.type=a;this.a=this.target=c;this.f=!1}O.prototype.c=function(){this.f=!0};function P(a,c){O.call(this,a?a.type:"");this.relatedTarget=this.a=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.b=null;if(a){var b=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.a=c;if(c=a.relatedTarget){if(B){a:{try{x(c.nodeName);var e=!0;break a}catch(f){}e=!1}e||(c=null)}}else"mouseover"==b?c=a.fromElement:"mouseout"==b&&(c=a.toElement);
this.relatedTarget=c;null===d?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.b=a;a.defaultPrevented&&this.c()}}
m(P,O);var Aa=[1,4,2];P.prototype.c=function(){P.o.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,za)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};var Ba="closure_listenable_"+(1E6*Math.random()|0),Ca=0;function Da(a,c,b,d,e){this.listener=a;this.a=null;this.src=c;this.type=b;this.capture=!!d;this.b=e;this.key=++Ca;this.g=this.i=!1}function Ea(a){a.g=!0;a.listener=null;a.a=null;a.src=null;a.b=null};function Fa(a){this.src=a;this.a={};this.b=0};var Q="closure_lm_"+(1E6*Math.random()|0),R={},Ga=0;
function Ha(a,c,b,d,e){if("array"==l(c)){for(var f=0;f<c.length;f++)Ha(a,c[f],b,d,e);return null}b=Ia(b);if(a&&a[Ba])a=Ja(a,c,b,d,e);else{f=b;if(!c)throw Error("Invalid event type");b=!!d;var g=T(a);g||(a[Q]=g=new Fa(a));var k=g,S=c.toString(),g=k.a[S];g||(g=k.a[S]=[],k.b++);var r;b:{for(r=0;r<g.length;++r){var E=g[r];if(!E.g&&E.listener==f&&E.capture==!!d&&E.b==e)break b}r=-1}-1<r?(d=g[r],d.i=!1):(d=new Da(f,k.src,S,!!d,e),d.i=!1,g.push(d));if(!d.a){e=Ka();d.a=e;e.src=a;e.listener=d;if(a.addEventListener)a.addEventListener(c.toString(),
e,b);else if(a.attachEvent)a.attachEvent(La(c.toString()),e);else throw Error("addEventListener and attachEvent are unavailable.");Ga++}a=d}return a}function Ka(){var a=Ma,c=ya?function(b){return a.call(c.src,c.listener,b)}:function(b){b=a.call(c.src,c.listener,b);if(!b)return b};return c}
function Na(a){if("number"!=typeof a&&a&&!a.g){var c=a.src;if(c&&c[Ba])c.a(a);else{var b=a.type,d=a.a;c.removeEventListener?c.removeEventListener(b,d,a.capture):c.detachEvent&&c.detachEvent(La(b),d);Ga--;if(b=T(c)){var d=a.type,e;if(e=d in b.a){e=b.a[d];var f=ja(e,a),g;(g=0<=f)&&Array.prototype.splice.call(e,f,1);e=g}e&&(Ea(a),0==b.a[d].length&&(delete b.a[d],b.b--));0==b.b&&(b.src=null,c[Q]=null)}else Ea(a)}}}function La(a){return a in R?R[a]:R[a]="on"+a}
function Oa(a,c,b,d){var e=!0;if(a=T(a))if(c=a.a[c.toString()])for(c=c.concat(),a=0;a<c.length;a++){var f=c[a];f&&f.capture==b&&!f.g&&(f=Pa(f,d),e=e&&!1!==f)}return e}function Pa(a,c){var b=a.listener,d=a.b||a.src;a.i&&Na(a);return b.call(d,c)}
function Ma(a,c){if(a.g)return!0;if(!ya){if(!c)a:{c=["window","event"];for(var b=h,d;d=c.shift();)if(null!=b[d])b=b[d];else{c=null;break a}c=b}d=c;c=new P(d,this);b=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=c.a;e;e=e.parentNode)d.push(e);for(var e=a.type,f=d.length-1;0<=f;f--)c.a=d[f],a=Oa(d[f],e,!0,c),b=b&&a;for(f=0;f<d.length;f++)c.a=d[f],a=Oa(d[f],e,!1,c),b=b&&a}return b}return Pa(a,
new P(c,this))}function T(a){a=a[Q];return a instanceof Fa?a:null}var U="__closure_events_fn_"+(1E9*Math.random()>>>0);function Ia(a){if("function"==l(a))return a;a[U]||(a[U]=function(c){return a.handleEvent(c)});return a[U]};function V(a){n.call(this);this.h=a;this.c={}}m(V,n);var Qa=[];function Ja(a,c,b,d,e){"array"!=l(b)&&(b&&(Qa[0]=b.toString()),b=Qa);for(var f=0;f<b.length;f++){var g=Ha(c,b[f],d||a.handleEvent,e||!1,a.h||a);if(!g)break;a.c[g.key]=g}return a}function Ra(a){ka(a.c,function(a,b){this.c.hasOwnProperty(b)&&Na(a)},a);a.c={}}V.prototype.f=function(){V.o.f.call(this);Ra(this)};V.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var Sa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ta(a){return a?decodeURI(a):a}var Ua=/#|$/;
function Va(a,c){var b=a.search(Ua);a:{var d=0;for(var e=c.length;0<=(d=a.indexOf(c,d))&&d<b;){var f=a.charCodeAt(d-1);if(38==f||63==f)if(f=a.charCodeAt(d+e),!f||61==f||38==f||35==f)break a;d+=e+1}d=-1}if(0>d)return null;e=a.indexOf("&",d);if(0>e||e>b)e=b;d+=c.length+1;return decodeURIComponent(a.substr(d,e-d).replace(/\+/g," "))};function W(a){n.call(this);this.c=a||document.body;this.h=new V(this);a=aa(ba,this.h);this.b?a():(this.a||(this.a=[]),this.a.push(a));Ja(this.h,this.c,"click",this.s,void 0)}m(W,n);
W.prototype.s=function(a){if((xa?0==a.b.button:"click"==a.type||a.b.button&Aa[0])&&!(C&&oa&&a.ctrlKey)&&!a.f)for(var c=a.target;c&&c!=this.c;){if(c.tagName&&"a"==c.tagName.toLowerCase()){var b=c.getAttribute("href")||c.getAttributeNS("http://www.w3.org/1999/xlink","href"),d,e=d=b;try{"www.google.com"==Ta(d.match(Sa)[3]||null)&&"/url"==Ta(d.match(Sa)[5]||null)&&(e=Va(d,"q")||Va(d,"url"))}catch(k){}d=e?e:"";if(b!=d){var f=void 0,e=d;d={target:"_blank",noreferrer:!0};var c=window,b=e instanceof K?e:
ua("undefined"!=typeof e.href?e.href:String(e)),e=d.target||e.target,g=[];for(f in d)switch(f){case "width":case "height":case "top":case "left":g.push(f+"="+d[f]);break;case "target":case "noreferrer":break;default:g.push(f+"="+(d[f]?1:0))}f=g.join(",");(w("iPhone")&&!w("iPod")&&!w("iPad")||w("iPad")||w("iPod"))&&c.navigator&&c.navigator.standalone&&e&&"_self"!=e?(g=f=c.document.createElement("A"),b=b instanceof K?b:ua(b),g.href=L(b),f.setAttribute("target",e),d.noreferrer&&f.setAttribute("rel",
"noreferrer"),b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!0,c,1),f.dispatchEvent(b)):d.noreferrer?(c=c.open("",e,f),b=L(b),c&&(na&&-1!=b.indexOf(";")&&(b="'"+b.replace(/'/g,"%27")+"'"),c.opener=null,ia.test(b)&&(-1!=b.indexOf("&")&&(b=b.replace(ca,"&amp;")),-1!=b.indexOf("<")&&(b=b.replace(da,"&lt;")),-1!=b.indexOf(">")&&(b=b.replace(ea,"&gt;")),-1!=b.indexOf('"')&&(b=b.replace(fa,"&quot;")),-1!=b.indexOf("'")&&(b=b.replace(ga,"&#39;")),-1!=b.indexOf("\x00")&&(b=b.replace(ha,
"&#0;"))),b=N('<META HTTP-EQUIV="refresh" content="0; url='+b+'">'),c.document.write(b instanceof M&&b.constructor===M&&b.b===wa?b.a:"type_error:SafeHtml"),c.document.close())):c.open(L(b),e,f);a.c();break}}c=c.parentNode}};function Wa(a){new W(a)}var X=["DOCS_installLinkReferrerSanitizer"],Y=h;X[0]in Y||!Y.execScript||Y.execScript("var "+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===Wa?Y[Z]&&Y[Z]!==Object.prototype[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=Wa;}).call(this);
</script><script type="text/javascript">DOCS_installLinkReferrerSanitizer();</script></body></html>